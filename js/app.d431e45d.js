(function(t){function e(e){for(var n,i,s=e[0],o=e[1],u=e[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);c&&c(e);while(p.length)p.shift()();return l.push.apply(l,u||[]),a()}function a(){for(var t,e=0;e<l.length;e++){for(var a=l[e],n=!0,s=1;s<a.length;s++){var o=a[s];0!==r[o]&&(n=!1)}n&&(l.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},r={app:0},l=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/aconitum/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],o=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var c=o;l.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"12d6":function(t,e,a){},"1ce1":function(t,e,a){"use strict";a("50c9")},3654:function(t,e,a){},"4eab":function(t,e,a){},"50c9":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("OrgStructure")],1)},l=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.allData?a("div",{staticClass:"OrgStructure"},[a("OrgStructureHeader",{attrs:{title:"Организационная структура"}}),a("OrgStructureTable",{attrs:{data:t.allData}})],1):t._e()},s=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"OrgStructureHeader"},[a("div",{staticClass:"OrgStructureHeader__title"},[a("p",[t._v(t._s(t.title))])]),a("div",{staticClass:"OrgStructureHeader__actions"},[a("button",{staticClass:"OrgStructureHeader__button",on:{click:t.openNewEntryModal}},[a("svg",{attrs:{width:"1em",height:"1em",viewBox:"0 0 24 24"}},[a("path",{attrs:{fill:"currentColor",d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2Z"}})]),t._v(" Добавить ")])]),a("NewEntryModal",{ref:"modal"})],1)},u=[],c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show?a("div",{staticClass:"newEntryModal__shadow",on:{click:function(e){return e.target!==e.currentTarget?null:t.closeModal.apply(null,arguments)}}},[a("div",{staticClass:"newEntryModal"},[a("div",{staticClass:"newEntryModal__close",on:{click:t.closeModal}},[a("svg",{attrs:{width:"2em",height:"2em",viewBox:"0 0 24 24"}},[a("path",{attrs:{fill:"currentColor",d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"}})])]),t._t("title",(function(){return[a("h3",{staticClass:"newEntryModal__title"},[t._v("Добавить новый раздел")])]})),t._t("body",(function(){return[a("div",{staticClass:"newEntryModal__content"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[a("div",{staticClass:"newEntryModal__nameInp newEntryModal__inputGroup"},[a("label",{attrs:{for:"nameInp"}},[t._v("Название")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{id:"nameInp",type:"text",placeholder:"Введите название..."},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),a("div",{staticClass:"newEntryModal__isEmpty newEntryModal__inputGroup"},[a("label",{attrs:{for:"isEmpty"}},[t._v("Пустой раздел?")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.isEmpty,expression:"isEmpty"}],attrs:{type:"checkbox",name:"isEmpty",id:"isEmpty"},domProps:{checked:Array.isArray(t.isEmpty)?t._i(t.isEmpty,null)>-1:t.isEmpty},on:{change:function(e){var a=t.isEmpty,n=e.target,r=!!n.checked;if(Array.isArray(a)){var l=null,i=t._i(a,l);n.checked?i<0&&(t.isEmpty=a.concat([l])):i>-1&&(t.isEmpty=a.slice(0,i).concat(a.slice(i+1)))}else t.isEmpty=r}}})]),t.isEmpty?t._e():a("div",{staticClass:"newEntryModal__data newEntryModal__inputGroup"},[a("div",{staticClass:"newEntryModal__totalInp"},[a("label",{attrs:{for:"totalInp"}},[t._v("Общее количество")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entry.total,expression:"entry.total"}],attrs:{type:"number",id:"totalInp"},domProps:{value:t.entry.total},on:{input:function(e){e.target.composing||t.$set(t.entry,"total",e.target.value)}}})]),a("div",{staticClass:"newEntryModal__actualInp newEntryModal__inputGroup"},[a("label",{attrs:{for:"totalInp"}},[t._v("Общее количество")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entry.actual,expression:"entry.actual"}],attrs:{type:"number",id:"actualInp"},domProps:{value:t.entry.actual},on:{input:function(e){e.target.composing||t.$set(t.entry,"actual",e.target.value)}}})])]),a("div",{staticClass:"newEntryModal__level newEntryModal__inputGroup"},[a("label",{attrs:{for:"levelInp"}},[t._v("Ключ вложения")]),a("p",{staticClass:"newEntryModal__level-caption"},[t._v(" *для главного раздела введите 0 ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.level,expression:"level"}],attrs:{id:"levelInp",type:"text",placeholder:"Алматы, Управление 1"},domProps:{value:t.level},on:{input:function(e){e.target.composing||(t.level=e.target.value)}}})]),a("button",{staticClass:"newEntryModal__submit",attrs:{type:"submit"}},[t._v(" Отправить ")])])])]}))],2)]):t._e()},d=[],p=(a("b0c0"),a("a9e3"),{name:"NewEntryModal",data:function(){return{show:!1,isEmpty:!0,level:"0",name:"",entry:{total:0,actual:0}}},methods:{closeModal:function(){this.show=!1},handleSubmit:function(){this.isEmpty?(this.$store.commit("addKey",{name:this.name,level:this.level}),this.name="",this.show=!1,this.closeModal()):(this.$store.commit("addKey",{name:this.name,entry:{"Общее количество":Number(this.entry.total),"Фактическое количество":Number(this.entry.actual)},level:this.level}),this.name="",this.show=!1,this.closeModal())}}}),m=p,f=(a("e24d"),a("2877")),v=Object(f["a"])(m,c,d,!1,null,null,null),_=v.exports,h={name:"OrgStructureHeader",components:{NewEntryModal:_},methods:{openNewEntryModal:function(){this.$refs.modal.show=!0}},props:{title:{type:String,default:""}}},y=h,b=(a("bcf8"),Object(f["a"])(y,o,u,!1,null,null,null)),g=b.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"OrgStructureTable noselect"},[t._m(0),t._l(t.data,(function(t,e){return a("OrgStructureTableItem",{key:e,attrs:{id:e,self:t,name:e}})}))],2)},E=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"OrgStructureTable__header"},[a("div",{staticClass:"OrgStructureTable__headerItem"}),a("div",{staticClass:"OrgStructureTable__headerItem"},[t._v("Общее количество")]),a("div",{staticClass:"OrgStructureTable__headerItem"},[t._v("Фактическое количество")]),a("div",{staticClass:"OrgStructureTable__headerItem"},[t._v("Действия")])])}],O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.name?a("div",{ref:t.id,staticClass:"OrgStructureTableItem",on:{click:function(e){return e.stopPropagation(),function(){return t.handleUnwrap(t.id)}.apply(null,arguments)}}},[a("div",{staticClass:"OrgStructureTableItem__self"},[a("div",{staticClass:"OrgStructureTableItem__label"},[Object.keys(t.self).includes("Общее количество")?t._e():a("svg",{staticClass:"OrgStructureTableItem__chevron",attrs:{width:"1.5em",height:"1.5em",viewBox:"0 0 24 24"}},[a("path",{attrs:{fill:"currentColor",d:"M8.59 16.58L13.17 12L8.59 7.41L10 6l6 6l-6 6l-1.41-1.42Z"}})]),t._v(" "+t._s(t.name)+" ")]),a("div",{staticClass:"OrgStructureTableItem__total"},[t._v(" "+t._s(t.people.total)+" ")]),a("div",{staticClass:"OrgStructureTableItem__actual"},[t._v(" "+t._s(t.people.actual)+" ")]),t.people.total>0?a("div",{staticClass:"OrgStructureTableItem__actions"},[a("button",{staticClass:"OrgStructureTableItem__actions-edit",on:{click:function(e){return e.stopPropagation(),t.openEditEntryModal.apply(null,arguments)}}},[a("svg",{attrs:{width:"2em",height:"2em",viewBox:"0 0 24 24"}},[a("path",{attrs:{fill:"currentColor",d:"M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83l3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"}})])]),a("button",{staticClass:"OrgStructureTableItem__actions-delete",on:{click:function(e){return t.deleteKey(e)}}},[a("svg",{attrs:{width:"2em",height:"2em",viewBox:"0 0 24 24"}},[a("path",{attrs:{fill:"currentColor",d:"M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12Z"}})])]),a("EditEntryModal",{ref:"modal",attrs:{id:t.id,initialVals:t.people}})],1):t._e()]),Object.keys(t.self).includes("Общее количество")?t._e():a("div",{staticClass:"OrgStructureTableItem__children"},t._l(t.self,(function(e,n){return a("OrgStructureTableItem",{key:t.name+"_"+n,attrs:{id:t.id+","+n,name:n,self:e}})})),1)]):t._e()},M=[],S=a("5530"),C=(a("caad"),a("2532"),a("7039"),a("d3b7"),a("159b"),a("b64b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show?a("div",{staticClass:"editEntryModal__shadow",on:{click:function(e){return e.target!==e.currentTarget?null:t.closeModal.apply(null,arguments)}}},[a("div",{staticClass:"editEntryModal"},[a("div",{staticClass:"editEntryModal__close",on:{click:t.closeModal}},[a("svg",{attrs:{width:"2em",height:"2em",viewBox:"0 0 24 24"}},[a("path",{attrs:{fill:"currentColor",d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"}})])]),t._t("title",(function(){return[a("h3",{staticClass:"editEntryModal__title"},[t._v("Изменить запись")])]})),t._t("body",(function(){return[a("div",{staticClass:"editEntryModal__content"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[a("div",{staticClass:"newEntryModal__totalInp"},[a("label",{attrs:{for:"totalInp"}},[t._v("Общее количество")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entry.total,expression:"entry.total"}],attrs:{type:"number",id:"totalInp"},domProps:{value:t.entry.total},on:{input:function(e){e.target.composing||t.$set(t.entry,"total",e.target.value)}}})]),a("div",{staticClass:"newEntryModal__actualInp newEntryModal__inputGroup"},[a("label",{attrs:{for:"totalInp"}},[t._v("Общее количество")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entry.actual,expression:"entry.actual"}],attrs:{type:"number",id:"actualInp"},domProps:{value:t.entry.actual},on:{input:function(e){e.target.composing||t.$set(t.entry,"actual",e.target.value)}}})]),a("button",{staticClass:"editEntryModal__submit",attrs:{type:"submit"}},[t._v(" Отправить ")])])])]}))],2)]):t._e()}),I=[],T={name:"EditEntryModal",props:["initialVals","id"],data:function(){return{show:!1,entry:{total:0,actual:0}}},mounted:function(){this.entry=this.initialVals},methods:{closeModal:function(){this.show=!1},handleSubmit:function(){this.$store.commit("setKey",{entry:this.entry,level:this.id}),this.name="",this.show=!1,this.closeModal()}}},j=T,x=(a("d1d5"),Object(f["a"])(j,C,I,!1,null,null,null)),L=x.exports,$={components:{EditEntryModal:L},name:"OrgStructureTableItem",data:function(){return{people:{total:0,actual:0}}},props:{id:{type:String,default:null},name:{type:String,default:null},self:{type:Object,default:null}},methods:{openEditEntryModal:function(){this.$refs.modal.show=!0},deleteKey:function(t){t.preventDefault(),this.$store.commit("deleteKey",this.id)},handleUnwrap:function(t){var e=this.$refs[t];e&&("OrgStructureTableItem"===e.getAttribute("class")?e.setAttribute("class","OrgStructureTableItem OrgStructureTableItem-active"):e.setAttribute("class","OrgStructureTableItem"))},countTreeEntries:function(t,e){var a=this;return Object.getOwnPropertyNames(t).includes("Общее количество")?(e.total+=t["Общее количество"],e.actual+=t["Фактическое количество"]):Object.keys(t).forEach((function(n){e=Object(S["a"])(Object(S["a"])({},e),a.countTreeEntries(t[n],e))})),e},countPeople:function(t){var e=0;t&&(e=this.countTreeEntries(t,{total:0,actual:0})),this.people=e}},mounted:function(){this.countPeople(this.self)}},k=$,P=(a("1ce1"),Object(f["a"])(k,O,M,!1,null,null,null)),N=P.exports,D={name:"OrgStructureTable",props:{data:{type:Object,default:null}},components:{OrgStructureTableItem:N},mounted:function(){}},A=D,H=(a("f56b"),Object(f["a"])(A,w,E,!1,null,null,null)),K=H.exports,B=a("2f62"),G={name:"OrgStructure",components:{OrgStructureHeader:g,OrgStructureTable:K},computed:Object(B["b"])(["allData"])},V=G,Z=(a("f78f"),Object(f["a"])(V,i,s,!1,null,null,null)),J=Z.exports,U={name:"App",components:{OrgStructure:J},mounted:function(){this.$store.dispatch("fetchData")}},q=U,z=(a("034f"),Object(f["a"])(q,r,l,!1,null,null,null)),F=z.exports,Q=(a("d81d"),a("ac1f"),a("1276"),a("498a"),{"Нур-султан":{"Управление 1123123123":{"Отдел 1":{"Команда 1":{"Общее количество":120,"Фактическое количество":64},"Команда 2":{"Общее количество":45,"Фактическое количество":2}}}},"Алмата":{"Управление 1":{"Отдел 1":{"Команда 1":{"Общее количество":120,"Фактическое количество":64},"Команда 2":{"Общее количество":45,"Фактическое количество":2}}},"Управление 2":{"Отдел 1":{"Команда 1":{"Общее количество":120,"Фактическое количество":64},"Команда 2":{"Общее количество":45,"Фактическое количество":2}},"Отдел 2":{"Команда 1":{"Общее количество":120,"Фактическое количество":64},"Команда 2":{"Общее количество":45,"Фактическое количество":2}},"Отдел 3":{"Команда 1":{"Общее количество":120,"Фактическое количество":64},"Команда 2":{"Общее количество":45,"Фактическое количество":2}}},"Управление 3":{"Отдел 1":{"Команда 1":{"Общее количество":120,"Фактическое количество":64},"Команда 2":{"Общее количество":45,"Фактическое количество":2}},"Отдел 2":{"Команда 1":{"Общее количество":120,"Фактическое количество":64},"Команда 2":{"Общее количество":45,"Фактическое количество":2}},"Отдел 3":{"Команда 1":{"Общее количество":120,"Фактическое количество":64},"Команда 2":{"Общее количество":45,"Фактическое количество":2}}}},"Актау":{"Управление 1":{"Отдел 1":{"Команда 1":{"Отдел 1":{"Команда 1":{"Общее количество":120,"Фактическое количество":64},"Команда 2":{"Общее количество":45,"Фактическое количество":2}},"Отдел 2":{"Команда 1":{"Отдел 1":{"Команда 1":{"Отдел 1":{"Команда 1":{"Отдел 1":{"Команда 1":{"Отдел 1":{"Команда 1":{"Общее количество":120,"Фактическое количество":64},"Команда 2":{"Общее количество":45,"Фактическое количество":2}}},"Команда 2":{"Общее количество":45,"Фактическое количество":2}}},"Команда 2":{"Общее количество":45,"Фактическое количество":2}}},"Команда 2":{"Общее количество":45,"Фактическое количество":2},"Отдел 2":{"Команда 1":{"Общее количество":120,"Фактическое количество":64},"Команда 2":{"Общее количество":45,"Фактическое количество":2}},"Отдел 3":{"Команда 1":{"Общее количество":120,"Фактическое количество":64},"Команда 2":{"Общее количество":45,"Фактическое количество":2}}}},"Команда 2":{"Общее количество":45,"Фактическое количество":2}}},"Команда 2":{"Общее количество":45,"Фактическое количество":2}}},"Управление 2":{"Отдел 1":{"Команда 1":{"Общее количество":120,"Фактическое количество":64},"Команда 2":{"Общее количество":45,"Фактическое количество":2}},"Отдел 2":{"Команда 1":{"Общее количество":120,"Фактическое количество":64},"Команда 2":{"Общее количество":45,"Фактическое количество":2}},"Отдел 3":{"Команда 1":{"Общее количество":120,"Фактическое количество":64},"Команда 2":{"Общее количество":45,"Фактическое количество":2}}},"Управление 3":{"Отдел 1":{"Команда 1":{"Общее количество":120,"Фактическое количество":64},"Команда 2":{"Общее количество":45,"Фактическое количество":2}},"Отдел 2":{"Команда 1":{"Общее количество":120,"Фактическое количество":64},"Команда 2":{"Общее количество":45,"Фактическое количество":2}},"Отдел 3":{"Команда 1":{"Общее количество":120,"Фактическое количество":64},"Команда 2":{"Общее количество":45,"Фактическое количество":2}}}}}),R=a("53ca");function W(t,e){var a=e.shift();t[a]?e.length?W(t[a],e):n["a"].delete(t,a):console.log("АХТУНГ")}function X(t,e,a){var r=e.shift();t[r]||n["a"].set(t,r,{}),e.length?X(t[r],e,a):a&&"object"===Object(R["a"])(a)&&!Array.isArray(a)?t[r]=Object(S["a"])(Object(S["a"])({},t[r]),a):t[r]=a}n["a"].use(B["a"]);var Y=new B["a"].Store({state:{data:{}},getters:{allData:function(t){return t.data}},mutations:{setData:function(t,e){t.data=e},loadData:function(t){t.data=Q},setKey:function(t,e){X(t.data,e.level.split(",").map((function(t){return t.trim()})),e.entry)},addKey:function(t,e){var a=e.name,r=e.level,l=e.entry;l?"0"===r?n["a"].set(t.data,a,l):(r+=","+a,X(t.data,r.split(",").map((function(t){return t.trim()})),l)):"0"===r?n["a"].set(t.data,a,{}):(r+=","+a,X(t.data,r.split(",").map((function(t){return t.trim()})),{}))},deleteKey:function(t,e){var a=e.split(",").map((function(t){return t.trim()}));1!==a.length?W(t.data,a):n["a"].delete(t.data,a[0])}},actions:{fetchData:function(t){t.commit("loadData")}},modules:{}});n["a"].config.productionTip=!1,new n["a"]({store:Y,render:function(t){return t(F)}}).$mount("#app")},7288:function(t,e,a){},"85ec":function(t,e,a){},bc45:function(t,e,a){},bcf8:function(t,e,a){"use strict";a("bc45")},d1d5:function(t,e,a){"use strict";a("7288")},e24d:function(t,e,a){"use strict";a("3654")},f56b:function(t,e,a){"use strict";a("4eab")},f78f:function(t,e,a){"use strict";a("12d6")}});
//# sourceMappingURL=app.d431e45d.js.map